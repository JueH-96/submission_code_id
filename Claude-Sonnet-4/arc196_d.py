Wait, I think my approach is too simplistic. Let me reconsider the problem more carefully.

The key insight is that this is about finding if there exists a valid assignment of road strengths. Let me think about this as a graph coloring or constraint satisfaction problem.